(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var o=n(1),i=n.n(o),a=n(8),r=n.n(a),c=(n(14),n(9)),s=n(2),u=n.p+"static/media/logo.03b78ada.svg",l=n(0);function p(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("img",{src:u,alt:"\u043b\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430 '\u041c\u0435\u0441\u0442\u043e'",className:"header__logo"})})}var _=i.a.createContext();function d(t){var e=t.url,n=t.alt,i=t.title,a=t.likes,r=t.owner,c=t.id,s=t.onCardClick,u=t.onRemoveButtonClick,p=t.onCardLike,d=Object(o.useContext)(_),b=r._id===d._id,h="button element__remove-button ".concat(b?"element__remove-button_visible":"element__remove-button_hidden"),m=a.some((function(t){return t._id===d._id})),f="button element__like-button ".concat(m&&"element__like-button_active");return Object(l.jsxs)("article",{className:"element",children:[Object(l.jsx)("button",{type:"button",className:h,onClick:function(){u(c)}}),Object(l.jsx)("img",{src:e,alt:n,className:"element__image",onClick:function(){s(e,i)}}),Object(l.jsxs)("div",{className:"element__description",children:[Object(l.jsx)("h2",{className:"element__title",children:i}),Object(l.jsxs)("div",{className:"element__like-container",children:[Object(l.jsx)("button",{type:"button",className:f,onClick:function(){p(a,c)}}),Object(l.jsx)("p",{className:"element__like-counter",children:a.length})]})]})]})}function b(t){var e=t.onEditAvatar,n=t.onEditProfile,i=t.onAddPlace,a=t.onCardClick,r=t.onRemoveButtonClick,c=t.cards,s=t.onCardLike,u=Object(o.useContext)(_);return Object(l.jsxs)("main",{className:"content",children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsx)("div",{className:"profile__image-container",onClick:e,children:Object(l.jsx)("img",{src:u.avatar,alt:"\u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043e\u0431\u043b\u0430\u0434\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f",className:"profile__image"})}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsx)("h1",{className:"profile__title",children:u.name}),Object(l.jsx)("button",{type:"button",className:"profile__edit-button button",onClick:n}),Object(l.jsx)("p",{className:"profile__subtitle",children:u.about})]}),Object(l.jsx)("button",{type:"button",className:"profile__add-button button",onClick:i})]}),Object(l.jsx)("section",{className:"elements",children:c.map((function(t){return Object(l.jsx)(d,{url:t.link,alt:t.name,title:t.name,likes:t.likes,owner:t.owner,id:t._id,onCardClick:a,onRemoveButtonClick:r,onCardLike:s},t._id)}))})]})}function h(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})}function m(t){var e=t.title,n=t.name,o=t.isOpen,i=t.onClose,a=t.buttonValue,r=t.children,c=t.onSubmit;return Object(l.jsx)("div",{className:"popup popup_type_".concat(n," ").concat(o&&"popup_opened"),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{type:"button",className:"popup__close-button button",onClick:i}),Object(l.jsx)("h2",{className:"popup__title",children:e}),Object(l.jsxs)("form",{name:n,className:"form",onSubmit:c,noValidate:!0,children:[r,Object(l.jsx)("button",{type:"submit",className:"popup__save-button popup__submit-button form__submit",children:a})]})]})})}function f(t){var e=t.isOpen,n=t.onClose,i=t.onUpdateAvatar,a=t.buttonText,r=Object(o.useRef)();return Object(l.jsxs)(m,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"edit-avatar",isOpen:e,onClose:n,buttonValue:a,onSubmit:function(t){t.preventDefault(),i({avatar:r.current.value})},children:[Object(l.jsx)("input",{name:"avatar",type:"url",className:"popup__input popup__input_type_avatar form__input",id:"avatar-input",placeholder:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",ref:r,required:!0}),Object(l.jsx)("span",{className:"form__input-error avatar-input-error"})]})}function j(t){var e=t.isOpen,n=t.onClose,i=t.onUpdateUser,a=t.buttonText,r=Object(o.useContext)(_),c=Object(o.useState)(""),u=Object(s.a)(c,2),p=u[0],d=u[1],b=Object(o.useState)(""),h=Object(s.a)(b,2),f=h[0],j=h[1];return Object(o.useEffect)((function(){d(r.name),j(r.about)}),[r,e]),Object(l.jsxs)(m,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit-profile",isOpen:e,onClose:n,buttonValue:a,onSubmit:function(t){t.preventDefault(),i({name:p,about:f})},children:[Object(l.jsx)("input",{name:"name",type:"text",className:"popup__input popup__input_type_name form__input",id:"name-input",required:!0,minLength:"2",maxLength:"40",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",value:p,onChange:function(t){return d(t.target.value)}}),Object(l.jsx)("span",{className:"form__input-error name-input-error"}),Object(l.jsx)("input",{name:"about",type:"text",className:"popup__input popup__input_type_about form__input",id:"about-input",required:!0,minLength:"2",maxLength:"200",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435",value:f,onChange:function(t){return j(t.target.value)}}),Object(l.jsx)("span",{className:"form__input-error about-input-error"})]})}function O(t){var e=t.isOpen,n=t.onClose,i=t.onAddPlace,a=t.buttonText,r=Object(o.useState)(""),c=Object(s.a)(r,2),u=c[0],p=c[1],_=Object(o.useState)(""),d=Object(s.a)(_,2),b=d[0],h=d[1];return Object(l.jsxs)(m,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-place",isOpen:e,onClose:n,buttonValue:a,onSubmit:function(t){t.preventDefault(),console.log(u,b),i({name:u,link:b}),p(""),h("")},children:[Object(l.jsx)("input",{name:"title",type:"text",className:"popup__input popup__input_type_title form__input",id:"title-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",value:u,onChange:function(t){return p(t.target.value)},required:!0}),Object(l.jsx)("span",{className:"form__input-error title-input-error"}),Object(l.jsx)("input",{name:"link",type:"url",className:"popup__input popup__input_type_link form__input",id:"link-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:b,onChange:function(t){return h(t.target.value)},required:!0}),Object(l.jsx)("span",{className:"form__input-error link-input-error"})]})}function v(t){var e=t.isOpen,n=t.onClose,o=t.onDelete,i=t.buttonText;return Object(l.jsx)(m,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"delete-confirm",isOpen:e,onClose:n,buttonValue:i,onSubmit:function(t){t.preventDefault(),o()}})}function x(t){var e=t.url,n=t.title,o=t.onClose;return Object(l.jsx)("div",{className:"popup popup-image ".concat(n&&"popup_opened"),children:Object(l.jsxs)("div",{className:"popup__container popup-image__container",children:[Object(l.jsx)("button",{type:"button",className:"popup__close-button popup-image__close-button button",onClick:o}),Object(l.jsxs)("figure",{className:"popup-image__figure",children:[Object(l.jsx)("img",{className:"popup-image__image",src:e,alt:n}),Object(l.jsx)("figcaption",{className:"popup-image__caption",children:n})]})]})})}var C=n(5),k=n(6),g=new(function(){function t(e){Object(C.a)(this,t),this.checkResult=function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(t.status))},this._url=e,this._authorizationToken="4bbad6bd-2811-470e-a5ed-e059873eda41"}return Object(k.a)(t,[{key:"getUserInfo",value:function(){return fetch(this._url+"/users/me",{headers:{authorization:this._authorizationToken}}).then(this.checkResult)}},{key:"getInitialCards",value:function(){return fetch(this._url+"/cards",{headers:{authorization:this._authorizationToken}}).then(this.checkResult)}},{key:"editProfile",value:function(t){return fetch(this._url+"/users/me",{method:"PATCH",headers:{authorization:this._authorizationToken,"Content-Type":"application/json"},body:JSON.stringify(t)}).then(this.checkResult)}},{key:"addCard",value:function(t){return fetch(this._url+"/cards",{method:"POST",headers:{authorization:this._authorizationToken,"Content-Type":"application/json"},body:JSON.stringify(t)}).then(this.checkResult)}},{key:"deleteCard",value:function(t){return fetch(this._url+"/cards/"+t,{method:"DELETE",headers:{authorization:this._authorizationToken,"Content-Type":"application/json"}}).then(this.checkResult)}},{key:"addLike",value:function(t){return fetch(this._url+"/cards/likes/"+t,{method:"PUT",headers:{authorization:this._authorizationToken,"Content-Type":"application/json"}}).then(this.checkResult)}},{key:"removeLike",value:function(t){return fetch(this._url+"/cards/likes/"+t,{method:"DELETE",headers:{authorization:this._authorizationToken,"Content-Type":"application/json"}}).then(this.checkResult)}},{key:"editAvatar",value:function(t){return fetch(this._url+"/users/me/avatar",{method:"PATCH",headers:{authorization:this._authorizationToken,"Content-Type":"application/json"},body:JSON.stringify(t)}).then(this.checkResult)}}]),t}())("https://nomoreparties.co/v1/cohort-28");var y=function(){var t=Object(o.useState)(!1),e=Object(s.a)(t,2),n=e[0],i=e[1],a=Object(o.useState)(!1),r=Object(s.a)(a,2),u=r[0],d=r[1],m=Object(o.useState)(!1),C=Object(s.a)(m,2),k=C[0],y=C[1],N=Object(o.useState)(!1),S=Object(s.a)(N,2),E=S[0],L=S[1],T=Object(o.useState)([]),I=Object(s.a)(T,2),z=I[0],A=I[1],P=Object(o.useState)({}),B=Object(s.a)(P,2),R=B[0],V=B[1],w=Object(o.useState)({name:"",about:""}),q=Object(s.a)(w,2),D=q[0],U=q[1],F=Object(o.useState)(""),J=Object(s.a)(F,2),M=J[0],H=J[1],G=Object(o.useState)("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),K=Object(s.a)(G,2),Q=K[0],W=K[1],X=Object(o.useState)("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],tt=Object(o.useState)("\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),et=Object(s.a)(tt,2),nt=et[0],ot=et[1],it=Object(o.useState)("\u0414\u0430"),at=Object(s.a)(it,2),rt=at[0],ct=at[1];Object(o.useEffect)((function(){g.getInitialCards().then((function(t){A(t)})).catch((function(t){return console.log(t),[]}))}),[]),Object(o.useEffect)((function(){g.getUserInfo().then((function(t){U(t)})).catch((function(t){return console.log(t),[]}))}),[]);var st=function(){i(!1),d(!1),y(!1),L(!1),V({})},ut=function(){ct("\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435..."),g.deleteCard(M).then((function(){A((function(t){return t.filter((function(t){return t._id!==M}))}))})).then((function(){st(),ct("\u0414\u0430")})).catch((function(t){return console.log(t),[]}))};return Object(l.jsxs)(_.Provider,{value:D,children:[Object(l.jsx)(p,{}),Object(l.jsx)(b,{onEditAvatar:function(){i(!0)},onEditProfile:function(){d(!0)},onAddPlace:function(){y(!0)},onCardClick:function(t,e){V({url:t,title:e})},onRemoveButtonClick:function(t){H(t),L(!0)},cards:z,onCardLike:function(t,e){t.some((function(t){return t._id===D._id}))?g.removeLike(e).then((function(t){A((function(n){return n.map((function(n){return n._id===e?t:n}))}))})).catch((function(t){return console.log(t),[]})):g.addLike(e).then((function(t){A((function(n){return n.map((function(n){return n._id===e?t:n}))}))})).catch((function(t){return console.log(t),[]}))},onCardDelete:ut}),Object(l.jsx)(h,{}),Object(l.jsx)(f,{isOpen:n,onClose:st,onUpdateAvatar:function(t){W("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),g.editAvatar(t).then((function(t){return U(t)})).then((function(){st(),W("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")})).catch((function(t){return console.log(t),[]}))},buttonText:Q}),Object(l.jsx)(j,{isOpen:u,onClose:st,onUpdateUser:function(t,e){$("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),g.editProfile(t,e).then((function(t){return U(t)})).then((function(){st(),$("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")})).catch((function(t){return console.log(t),[]}))},buttonText:Z}),Object(l.jsx)(O,{isOpen:k,onClose:st,onAddPlace:function(t,e){ot("\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."),g.addCard(t,e).then((function(t){return A([t].concat(Object(c.a)(z)))})).then((function(){st(),ot("\u0421\u043e\u0437\u0434\u0430\u0442\u044c")})).catch((function(t){return console.log(t),[]}))},buttonText:nt}),Object(l.jsx)(x,{onClose:st,url:R.url,title:R.title}),Object(l.jsx)(v,{isOpen:E,onClose:st,onDelete:ut,buttonText:rt})]})},N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(e){var n=e.getCLS,o=e.getFID,i=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),o(t),i(t),a(t),r(t)}))},S=function(){function t(e,n){var o=this;Object(C.a)(this,t),this.enableValidation=function(){o._setEventListeners(o._form)},this._setEventListeners=function(){o._toggleButtonState(),o._inputList.forEach((function(t){t.addEventListener("input",(function(){o._checkInputValidity(t),o._toggleButtonState()}))})),o._form.addEventListener("reset",(function(){o._setInitialFormState()}))},this._toggleButtonState=function(){o._hasInvalidInput()?(o._buttonElement.classList.add(o._selectors.inactiveButtonClass),o._buttonElement.setAttribute("disabled",!0)):(o._buttonElement.classList.remove(o._selectors.inactiveButtonClass),o._buttonElement.removeAttribute("disabled"))},this._checkInputValidity=function(t){o._errorElement=o._form.querySelector(".".concat(t.id,"-error")),t.validity.valid?o._hideInputError(t):o._showInputError(t,t.validationMessage)},this._hasInvalidInput=function(){return o._inputList.some((function(t){return!t.validity.valid}))},this._showInputError=function(t,e){t.classList.add(o._selectors.inputErrorClass),o._errorElement.textContent=e,o._errorElement.classList.add(o._selectors.errorClass)},this._hideInputError=function(t){t.classList.remove(o._selectors.inputErrorClass),o._errorElement.classList.remove(o._selectors.errorClass),o._errorElement.textContent=""},this._selectors=e,this._form=document.querySelector(n),this._inputList=Array.from(this._form.querySelectorAll(this._selectors.inputSelector)),this._buttonElement=this._form.querySelector(this._selectors.submitButtonSelector)}return Object(k.a)(t,[{key:"_setInitialFormState",value:function(){var t=this;this._inputList.forEach((function(e){t._errorElement=t._form.querySelector(".".concat(e.id,"-error")),t._hideInputError(e)})),this._buttonElement.classList.add(this._selectors.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}}]),t}(),E={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"};r.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(y,{})}),document.getElementById("root"));var L=new S(E,"form[name=edit-profile]"),T=new S(E,"form[name=add-place]"),I=new S(E,"form[name=edit-avatar]");L.enableValidation(),T.enableValidation(),I.enableValidation(),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.8e067239.chunk.js.map